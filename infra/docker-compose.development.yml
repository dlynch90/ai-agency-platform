services:
  elasticsearch:
    image: elasticsearch:8.19.9
    ports:
    - 9200:9200
    environment:
    - discovery.type=single-node
    - xpack.security.enabled=false
  jupyter:
    image: jupyter/scipy-notebook
    ports:
    - 8888:8888
  neo4j:
    image: neo4j:5
    ports:
    - 7474:7474
    - 7687:7687
  ollama:
    image: ollama/ollama
    ports:
    - 11434:11434
  postgres:
    image: postgres:15
    ports:
    - 5432:5432
    environment:
    - POSTGRES_PASSWORD=postgres
    - POSTGRES_USER=postgres
    - POSTGRES_DB=ai_agency
  redis:
    image: redis:7
      environment:
      REDIS_MAX_CONNECTIONS: "20"
      POSTGRES_MAX_CONNECTIONS: "10"
      NEO4J_MAX_CONNECTIONS: "5"
      KAFKA_MAX_CONNECTIONS: "10"
      RABBITMQ_MAX_CONNECTIONS: "15"
    ports:
    - 6379:6379

networks:
  ai-agency-network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
          gateway: 172.20.0.1
  traefik-public:
    external: true
