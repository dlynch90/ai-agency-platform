# =============================================================================
# AGI Environment - Production Override Values
# =============================================================================

global:
  environment: production
  namespace: agi-production
  domain: agi.example.com

# Production image settings
image:
  repository: your-registry.io/agi-core
  tag: "v1.0.0"
  pullPolicy: Always

imagePullSecrets:
  - name: registry-credentials

# Production replica count (HPA will manage this)
replicaCount: 5

# Production resources (higher limits)
resources:
  requests:
    memory: "512Mi"
    cpu: "500m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

# Production autoscaling
autoscaling:
  enabled: true
  minReplicas: 5
  maxReplicas: 20
  targetCPUUtilizationPercentage: 65
  targetMemoryUtilizationPercentage: 75
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 600
      policies:
        - type: Percent
          value: 10
          periodSeconds: 120
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
        - type: Percent
          value: 50
          periodSeconds: 30
        - type: Pods
          value: 5
          periodSeconds: 30

# Production PDB (higher availability)
podDisruptionBudget:
  enabled: true
  minAvailable: 3

# Production ingress with TLS
ingress:
  enabled: true
  className: nginx
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "120"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "120"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/rate-limit-burst: "200"
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: agi.example.com
      paths:
        - path: /
          pathType: Prefix
    - host: api.agi.example.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: agi-production-tls
      hosts:
        - agi.example.com
        - api.agi.example.com

# Production network policies (stricter)
networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: ingress-nginx
      ports:
        - protocol: TCP
          port: 8000
    - from:
        - namespaceSelector:
            matchLabels:
              name: monitoring
      ports:
        - protocol: TCP
          port: 9090
  egress:
    - to:
        - namespaceSelector:
            matchLabels:
              name: database
      ports:
        - protocol: TCP
          port: 5432
    - to:
        - namespaceSelector:
            matchLabels:
              name: cache
      ports:
        - protocol: TCP
          port: 6379
    - to:
        - ipBlock:
            cidr: 0.0.0.0/0
            except:
              - 10.0.0.0/8
              - 172.16.0.0/12
              - 192.168.0.0/16
      ports:
        - protocol: TCP
          port: 443

# Production topology spread
topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app.kubernetes.io/name: agi-core
  - maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app.kubernetes.io/name: agi-core

# Production affinity
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
                - agi-core
        topologyKey: kubernetes.io/hostname

# Production config
configMap:
  enabled: true
  data:
    APP_ENV: production
    LOG_LEVEL: warn
    METRICS_ENABLED: "true"
    TRACING_ENABLED: "true"
    RATE_LIMIT_ENABLED: "true"
    RATE_LIMIT_RPS: "1000"

# Production monitoring
monitoring:
  prometheus:
    enabled: true
    scrapeInterval: 10s
  grafana:
    enabled: true
  sidecar:
    enabled: true
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"

logging:
  sidecar:
    enabled: true
    resources:
      requests:
        memory: "64Mi"
        cpu: "50m"
      limits:
        memory: "128Mi"
        cpu: "100m"
